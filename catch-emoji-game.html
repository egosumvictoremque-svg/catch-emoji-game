<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catch the Emoji - Arcade Edition</title>
<style>
    html, body {
        margin: 0; padding: 0; height: 100%; overflow: hidden;
        font-family: Arial, sans-serif; background: black; color: white;
    }
    #score, #lives {
        font-size: 22px; font-weight: bold; position: absolute; top: 10px; z-index: 2;
    }
    #score { left: 10px; }
    #lives { right: 10px; }
    .emoji {
        position: absolute; font-size: 40px; cursor: pointer;
        animation: fall linear forwards;
    }
    @keyframes fall {
        0% { top: -50px; }
        100% { top: 100vh; }
    }
    .pop {
        animation: pop 0.3s ease-out forwards;
    }
    @keyframes pop {
        0% { transform: scale(1); opacity: 1; }
        100% { transform: scale(2); opacity: 0; }
    }
    #gameOver, #startScreen {
        position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
        background: rgba(0,0,0,0.8); padding: 20px; font-size: 22px;
        border-radius: 10px; display: none; z-index: 3; text-align: center;
    }
    button {
        padding: 10px 20px; font-size: 18px; border: none; border-radius: 8px;
        background: #ff9800; color: white; cursor: pointer;
    }
    button:hover { background: #e68900; }
    canvas { position: absolute; top: 0; left: 0; z-index: 0; }
</style>
</head>
<body>

<!-- Background -->
<canvas id="bgCanvas"></canvas>

<p id="score">Score: 0</p>
<p id="lives">Lives: 3 ‚ù§Ô∏è</p>

<div id="startScreen">
    <h2>üéÆ Catch the Emoji - Arcade Edition üéÆ</h2>
    <p>Tap emojis before they fall!<br>3 Lives Only!</p>
    <button onclick="startGame()">Start Game</button>
</div>

<div id="gameOver">
    üíÄ Game Over!<br>
    <p id="finalScore"></p>
    <button onclick="restartGame()">Restart</button>
</div>

<script>
    let score = 0, lives = 3, gameActive = false;
    let gameInterval, fallSpeed = 4000, spawnRate = 800, difficultyTimer;
    const emojiList = ["üçï","üçî","üçü","üç©","üçé","üçå","üçì","ü™ô","üíé","‚≠ê","‚öΩ"];

    // Web Audio API
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playBeep(type="pop") {
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode);
        gainNode.connect(audioCtx.destination);
        if (type === "pop") {
            osc.frequency.value = 800;
            gainNode.gain.value = 0.2;
        } else {
            osc.frequency.value = 150;
            gainNode.gain.value = 0.3;
        }
        osc.type = "square";
        osc.start();
        osc.stop(audioCtx.currentTime + 0.15);
    }

    document.getElementById("startScreen").style.display = "block";

    function startGame() {
        document.documentElement.requestFullscreen?.();
        audioCtx.resume(); // Aktifkan audio

        score = 0; lives = 3; gameActive = true;
        fallSpeed = 4000; spawnRate = 800;
        document.getElementById("score").textContent = "Score: " + score;
        document.getElementById("lives").textContent = "Lives: " + lives + " ‚ù§Ô∏è";
        document.getElementById("startScreen").style.display = "none";
        document.getElementById("gameOver").style.display = "none";

        gameInterval = setInterval(spawnEmoji, spawnRate);
        difficultyTimer = setInterval(increaseDifficulty, 10000); // tiap 10 detik makin cepat
    }

    function spawnEmoji() {
        if (!gameActive) return;
        const emoji = document.createElement("div");
        emoji.classList.add("emoji");
        emoji.textContent = emojiList[Math.floor(Math.random()*emojiList.length)];
        emoji.style.left = Math.random()*(window.innerWidth-50) + "px";
        emoji.style.animationDuration = (fallSpeed/1000) + "s";
        document.body.appendChild(emoji);

        let clicked = false;
        emoji.addEventListener("click", () => {
            if (!clicked) {
                clicked = true;
                score++;
                playBeep("pop");
                document.getElementById("score").textContent = "Score: " + score;
                emoji.classList.add("pop");
                setTimeout(()=>emoji.remove(), 300);
            }
        }, { once: true });

        setTimeout(() => {
            if (!clicked && gameActive) {
                lives--;
                playBeep("miss");
                document.getElementById("lives").textContent = "Lives: " + lives + " ‚ù§Ô∏è";
                if (lives <= 0) gameOver();
            }
            emoji.remove();
        }, fallSpeed);
    }

    function increaseDifficulty() {
        if (fallSpeed > 1500) fallSpeed -= 300;
        if (spawnRate > 300) {
            clearInterval(gameInterval);
            spawnRate -= 100;
            gameInterval = setInterval(spawnEmoji, spawnRate);
        }
    }

    function gameOver() {
        gameActive = false;
        clearInterval(gameInterval);
        clearInterval(difficultyTimer);
        document.getElementById("finalScore").textContent = "Your Score: " + score;
        document.getElementById("gameOver").style.display = "block";
    }

    function restartGame() { startGame(); }

    // Aurora background
    const canvas = document.getElementById("bgCanvas"), ctx = canvas.getContext("2d");
    let w,h,gradientShift=0;
    function resizeCanvas() { w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; }
    window.addEventListener("resize", resizeCanvas); resizeCanvas();
    function drawAurora() {
        gradientShift += 0.002;
        let gradient = ctx.createLinearGradient(0, 0, w, h);
        gradient.addColorStop(0, `hsl(${(gradientShift*200)%360}, 80%, 50%)`);
        gradient.addColorStop(0.5, `hsl(${(gradientShift*200+60)%360}, 80%, 50%)`);
        gradient.addColorStop(1, `hsl(${(gradientShift*200+120)%360}, 80%, 50%)`);
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, w, h);
        requestAnimationFrame(drawAurora);
    }
    drawAurora();
</script>

</body>
</html>
