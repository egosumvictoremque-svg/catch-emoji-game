<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catch the Emoji - Aurora Edition</title>
<style>
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
        font-family: Arial, sans-serif;
        background: black;
        color: white;
        text-align: center;
    }
    #score, #lives {
        font-size: 22px;
        font-weight: bold;
        position: absolute;
        top: 10px;
        z-index: 2;
    }
    #score { left: 10px; }
    #lives { right: 10px; }
    .emoji {
        position: absolute;
        font-size: 40px;
        cursor: pointer;
        animation: fall 4s linear forwards;
        z-index: 2;
    }
    @keyframes fall {
        0% { top: -50px; }
        100% { top: 100vh; }
    }
    .pop {
        animation: pop 0.3s ease-out forwards;
    }
    @keyframes pop {
        0% { transform: scale(1); opacity: 1; }
        100% { transform: scale(2); opacity: 0; }
    }
    #gameOver, #startScreen {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0,0,0,0.8);
        padding: 20px;
        font-size: 22px;
        border-radius: 10px;
        display: none;
        z-index: 3;
    }
    button {
        padding: 10px 20px;
        font-size: 18px;
        border: none;
        border-radius: 8px;
        background: #ff9800;
        color: white;
        cursor: pointer;
    }
    button:hover {
        background: #e68900;
    }
    canvas {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 0;
    }
</style>
</head>
<body>

<!-- Background Aurora -->
<canvas id="bgCanvas"></canvas>

<p id="score">Score: 0</p>
<p id="lives">Lives: 3 ‚ù§Ô∏è</p>

<div id="startScreen">
    <h2>üåå Catch the Emoji - Aurora Edition üåå</h2>
    <p>Tap emojis before they fall!<br>You have 3 lives!</p>
    <button onclick="startGame()">Start Game</button>
</div>

<div id="gameOver">
    üíÄ Game Over!<br>
    <p id="finalScore"></p>
    <button onclick="restartGame()">Restart</button>
</div>

<!-- Audio -->
<audio id="clickSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_3f9b0d94b6.mp3?filename=pop-39222.mp3"></audio>
<audio id="missSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_d65bc74c71.mp3?filename=negative_beeps-6008.mp3"></audio>

<script>
    let score = 0;
    let lives = 3;
    let gameActive = false;
    let gameInterval;

    const clickSound = document.getElementById("clickSound");
    const missSound = document.getElementById("missSound");

    document.getElementById("startScreen").style.display = "block";

    function startGame() {
        // Fullscreen mode
        if (document.documentElement.requestFullscreen) {
            document.documentElement.requestFullscreen();
        }

        // Unlock audio (browser policy)
        clickSound.play().then(() => { clickSound.pause(); clickSound.currentTime = 0; });
        missSound.play().then(() => { missSound.pause(); missSound.currentTime = 0; });

        score = 0;
        lives = 3;
        gameActive = true;
        document.getElementById("score").textContent = "Score: " + score;
        document.getElementById("lives").textContent = "Lives: " + lives + " ‚ù§Ô∏è";
        document.getElementById("startScreen").style.display = "none";
        document.getElementById("gameOver").style.display = "none";

        gameInterval = setInterval(spawnEmoji, 800);
    }

    function spawnEmoji() {
        if (!gameActive) return;

        const emojiList = ["üçï", "üçî", "üçü", "üç©", "üçé", "üçå", "üçì", "ü™ô", "üíé", "‚≠ê", "‚öΩ"];
        const emoji = document.createElement("div");
        emoji.classList.add("emoji");
        emoji.textContent = emojiList[Math.floor(Math.random() * emojiList.length)];
        
        emoji.style.left = Math.random() * (window.innerWidth - 50) + "px";
        
        document.body.appendChild(emoji);

        let clicked = false;

        emoji.addEventListener("click", () => {
            clicked = true;
            score++;
            clickSound.currentTime = 0;
            clickSound.play();
            document.getElementById("score").textContent = "Score: " + score;
            emoji.classList.add("pop");
            setTimeout(() => emoji.remove(), 300);
        });

        setTimeout(() => {
            if (!clicked && gameActive) {
                lives--;
                missSound.currentTime = 0;
                missSound.play();
                document.getElementById("lives").textContent = "Lives: " + lives + " ‚ù§Ô∏è";
                if (lives <= 0) {
                    gameOver();
                }
            }
            emoji.remove();
        }, 4000);
    }

    function gameOver() {
        gameActive = false;
        clearInterval(gameInterval);
        document.getElementById("finalScore").textContent = "Your Score: " + score;
        document.getElementById("gameOver").style.display = "block";
    }

    function restartGame() {
        startGame();
    }

    // Aurora Background Animation
    const canvas = document.getElementById("bgCanvas");
    const ctx = canvas.getContext("2d");

    let w, h;
    function resizeCanvas() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    let gradientShift = 0;
    function drawAurora() {
        gradientShift += 0.002;
        let gradient = ctx.createLinearGradient(0, 0, w, h);
        gradient.addColorStop(0, `hsl(${(gradientShift*200)%360}, 80%, 50%)`);
        gradient.addColorStop(0.5, `hsl(${(gradientShift*200+60)%360}, 80%, 50%)`);
        gradient.addColorStop(1, `hsl(${(gradientShift*200+120)%360}, 80%, 50%)`);
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, w, h);
        requestAnimationFrame(drawAurora);
    }
    drawAurora();
</script>

</body>
</html>
